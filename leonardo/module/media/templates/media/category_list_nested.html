{% extends "widget/base.html" %}

{% load i18n %}
{% load thumbnail %}

{% block page_title %}{% if object %}{{ object }}{% endif %}{% endblock %}

{% block content %}
{% if object != None %}
{% if object.translation.description %}
{{ object.translation.description|safe }}
{% endif %}
<div class="object-grid ui-helper-clearfix">
	{% for object in object.media.all %}
	<div class="span-8">
		<div class="object-cell ui-helper-clearfix">
			<div class="object-cell-content">
				{% thumbnail object.file.file "200x840" format="PNG" as thumb %}
				{% thumbnail object.file.file "800x800" as image %}
				<a class="object-image" href="{{ image.url }}" rel="colorbox" title="{{ object.file }}">
					<img src="{{ thumb.url }}" />
				</a>
				{% endthumbnail %}
				{% endthumbnail %}
			</div>
		</div>
	</div>
	{% endfor %}
</div>
<script type="text/javascript">
/* <![CDATA[ */
jQuery(document).ready(function() {
	jQuery("a[rel='colorbox']").colorbox();
});
/* ]]> */
</script>
{% endif %}

<div class="object-grid ui-helper-clearfix">
	{% for child in object_list %}
	<div class="span-8">
		<div class="object-cell ui-helper-clearfix">
			<div class="object-cell-content">
				{% if child.media.count == 0 %}
				<a class="object-image" href="./{{ child.name }}/" title="{{ child }}">
					{% thumbnail child.get_featured_image.file "200x140" format="PNG" as thumb %}
					<img src="{{ thumb.url }}" /><br />
					{% endthumbnail %}
					<h3>{{ child }} ({{ child.media.count }} {% trans "items" %})</h3>
				</a>
				{% else %}
				<a class="object-image" target="_blank" href="{% url webcms_media_category_detail_standalone child.id %}" title="{{ child }}">
					{% thumbnail child.get_featured_image.file "200x140" format="PNG" as thumb %}
					<img src="{{ thumb.url }}" /><br />
					{% endthumbnail %}
					<h3>{{ child }} ({{ child.media.count }} {% trans "items" %})</h3>
				</a>
				{% endif %}
			</div>
		</div>
	</div>
	{% endfor %}
</div>
{% if object != None %}
<div class="span-24 buttonset">
	<a class="button f-right" href="../"><span><span>{% trans "Back to" %} {% if object.parent %}{{ object.parent }}{% else %}{{ request.webcms_page }}{% endif %}</span></span></a>
</div>
{% endif %}
{% endblock %}