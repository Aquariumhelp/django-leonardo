{% extends "admin/base_site.html" %}

{% load i18n %}
{% load webcms_tags %}

{% block title %}Views{% endblock %}

{% block content_title %}
<h2>{% trans "Controller Documentation" %}</h2>
{% endblock %}

{% block object-tools %}
<li><a href="{% url webcms_admin:devel_dashboard %}">{% trans "Project setup" %}</a></li>
{% endblock %}

{% block content %}

{% regroup views|dictsort:"site_id" by site as views_by_site %}

<div class="span-4 sidebar">
<h3>Jump to site</h3>
<ul>
    {% for site_views in views_by_site %}
    <li><a href="#site{{ site_views.grouper.id }}">{{ site_views.grouper.name }}</a></li>
    {% endfor %}
</ul>
</div>

<div class="span-20 last">
	<div class="tabs-container">
		<table>
			<thead>
				<tr>
					<th>{% trans "URL pattern" %}</th>
					<th>Controller / Description</th>
				</tr>
			</thead>
			<tbody>
				{% for site_views in views_by_site %}
				{% for view in site_views.list|dictsort:"url" %}
				{% ifchanged %}
				{% if view.url|startswith:"/admin" or view.url|startswith:"/cache" or view.url|startswith:"/inventory" or view.url|startswith:"/settings" %}
				{% else %}
				<tr>
					<td>
						<a href="{{ view.module }}.{{ view.name }}/">{{ view.url }}</a>
					</td>
					<td>
						{{ view.module }}.{{ view.name }}
						{% if view.title %}<br />{{ view.title }}{% endif %}
					</td>
				</tr>
				{% endif %}
				{% endifchanged %}
				{% endfor %}
				{% endfor %}
			</tbody>
		</table>
	</div>
</div>
{% endblock %}


